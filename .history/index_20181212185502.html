<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="main.css" />
    <script src="main.js"></script>
</head>
<body>
    <button id="btnGiveCommand">Give Command!</button>
    <br><br>
    <span id="message"></span>
    <br><br>

    <input type="checkbox" id="chkSteve"> Steve Rogers
    <br>
    <input type="checkbox" id="chkTony"> Tony Stark
    <br>
    <input type="checkbox" id="chkBruce"> Bruce Banner
    <br>
    <input type="checkbox" id="chkNick"> Nick Fury

    <script>
        const message = document.querySelector('#message');
        const SpeechRecognition = SpeechRecognition || webkitSpeechRecognition;
        const SpeechGrammarList = SpeechGrammarList || webkitSpeechGrammarList;

        const grammer = '#JSGF V1.0;';

        const recognition = new SpeechRecognition();
        const speechRecognitionGrammerList = new SpeechGrammarList();
        speechRecognitionGrammerList.addFromString(grammer, 1);

        recognition.grammars = speechRecognitionGrammerList;
        recognition.lang = 'en-Us';
        recognition.interimResults = false;

        // onresult
        // onspeechend
        // onerror

        recognition.onresult = (event) => {
            const last = event.results.length - 1;
            const command = event.results[last][0].transcript;
            message.textContent = 'Voice Input: ' + command + '.';

            if(command.toLowerCase() === 'select steve') {
                document.querySelector('chkSteve').checked = true;
            }
            if(command.toLowerCase() === 'select tony') {
                document.querySelector('chkTony').checked = true;
            }
            if(command.toLowerCase() === 'select bruce') {
                document.querySelector('chkBruce').checked = true;
            }
            if(command.toLowerCase() === 'select nick') {
                document.querySelector('chkNick').checked = true;
            }
        }

        recognition.onspeechend = () => {
            recognition.stop();
        }

        recognition.onerror = (event) => {
            message.textContent = 'Error occured in recognition: ' + event.error;
        }

        document.querySelector('#btnGiveCommand').addEventListener('click', () => {
            recognition.start();
        });

    </script>
</body>
</html>